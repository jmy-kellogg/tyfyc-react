import { useDispatch } from "react-redux";
import {
  removeJobTab,
  setShowResume,
  setShowApplications,
} from "../store/reducers/settingsSlice";

import type { TabsList } from "../../types";

interface Props {
  tabs: TabsList;
  active: string;
  setActive?: (tabValue: string) => void;
}

function Tabs({ tabs, active, setActive }: Props) {
  const dispatch = useDispatch();

  const removeTab = async (value: string) => {
    if (value === "resume") {
      dispatch(setShowResume(false));
    } else if (value === "applications") {
      dispatch(setShowApplications(false));
    } else {
      dispatch(removeJobTab(value));
    }
  };

  return (
    <>
      <div className="flex ">
        {tabs.map(({ label, value }) => (
          <div
            key={value}
            className={`flex p-2 rounded-t-lg border-zinc-300 ${
              active == value
                ? " font-bold bg-white mb-0 border-r-2 "
                : "border-r-3"
            }`}
          >
            <button
              className={`m-1 flex align-sub hover:font-bold ${
                active !== value ? "hover:cursor-pointer" : ""
              }`}
              onClick={() => setActive && setActive(value)}
            >
              {value === "resume" && (
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  strokeWidth={1.5}
                  stroke="currentColor"
                  className="size-5 mr-1"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"
                  />
                </svg>
              )}
              {value === "applications" && (
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  strokeWidth={1.5}
                  stroke="currentColor"
                  className="size-5 mr-1"
                >
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    d="m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"
                  />
                </svg>
              )}

              {label}
            </button>

            <button
              className="ml-1 align-sub rounded-lg hover:cursor-pointer hover:font-bold hover:bg-gray-300"
              onClick={() => removeTab(value)}
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                className="size-5"
              >
                <path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" />
              </svg>
            </button>
          </div>
        ))}
      </div>
    </>
  );
}

export default Tabs;
